{"ast":null,"code":"import { createCommentVNode as _createCommentVNode, resolveComponent as _resolveComponent, createVNode as _createVNode, createElementVNode as _createElementVNode, vModelText as _vModelText, withDirectives as _withDirectives, vModelSelect as _vModelSelect, openBlock as _openBlock, createElementBlock as _createElementBlock } from \"vue\";\nconst _hoisted_1 = {\n  class: \"mt-8\"\n};\n\nconst _hoisted_2 = /*#__PURE__*/_createElementVNode(\"h4\", {\n  class: \"text-gray-600\"\n}, \"POST Contractor Key Pickup\", -1\n/* HOISTED */\n);\n\nconst _hoisted_3 = {\n  id: \"pickupForm\"\n};\nconst _hoisted_4 = {\n  class: \"form-row\"\n};\nconst _hoisted_5 = {\n  class: \"mt-4\"\n};\n\nconst _hoisted_6 = /*#__PURE__*/_createElementVNode(\"label\", {\n  for: \"purpose\"\n}, \"Purpose:\", -1\n/* HOISTED */\n);\n\nconst _hoisted_7 = {\n  class: \"mt-4\"\n};\n\nconst _hoisted_8 = /*#__PURE__*/_createElementVNode(\"label\", {\n  for: \"status\"\n}, \"Status:\", -1\n/* HOISTED */\n);\n\nconst _hoisted_9 = /*#__PURE__*/_createElementVNode(\"option\", {\n  value: \"returned\"\n}, \"Returned\", -1\n/* HOISTED */\n);\n\nconst _hoisted_10 = /*#__PURE__*/_createElementVNode(\"option\", {\n  value: \"unreturned\"\n}, \"Unreturned\", -1\n/* HOISTED */\n);\n\nconst _hoisted_11 = [_hoisted_9, _hoisted_10];\nconst _hoisted_12 = {\n  class: \"form-row\"\n};\nconst _hoisted_13 = {\n  class: \"mt-4\"\n};\n\nconst _hoisted_14 = /*#__PURE__*/_createElementVNode(\"label\", {\n  for: \"keyinfo_id\"\n}, \"Keyinfo ID:\", -1\n/* HOISTED */\n);\n\nconst _hoisted_15 = {\n  class: \"form-row\"\n};\nconst _hoisted_16 = {\n  class: \"mt-4\"\n};\n\nconst _hoisted_17 = /*#__PURE__*/_createElementVNode(\"label\", {\n  for: \"qrScanner\"\n}, \"QR Code Scanner:\", -1\n/* HOISTED */\n);\n\nconst _hoisted_18 = {\n  ref: \"video\",\n  autoplay: \"\",\n  playsinline: \"\"\n};\nconst _hoisted_19 = {\n  class: \"form-row\"\n};\nconst _hoisted_20 = {\n  class: \"mt-6\"\n};\n\nconst _hoisted_21 = /*#__PURE__*/_createElementVNode(\"img\", {\n  id: \"capturedImage\",\n  src: \"\",\n  alt: \"Captured Image\",\n  style: {\n    \"max-width\": \"500px\",\n    \"display\": \"none\"\n  }\n}, null, -1\n/* HOISTED */\n);\n\nconst _hoisted_22 = /*#__PURE__*/_createElementVNode(\"a\", {\n  id: \"downloadImageLink\",\n  class: \"btn btn-primary\",\n  style: {\n    \"display\": \"none\"\n  },\n  download: \"pickup_image.jpeg\"\n}, \"Download Image\", -1\n/* HOISTED */\n);\n\nconst _hoisted_23 = /*#__PURE__*/_createElementVNode(\"br\", null, null, -1\n/* HOISTED */\n);\n\nconst _hoisted_24 = /*#__PURE__*/_createElementVNode(\"input\", {\n  type: \"file\",\n  id: \"pickup_photo_path\",\n  name: \"pickup_photo_path\"\n}, null, -1\n/* HOISTED */\n);\n\nexport function render(_ctx, _cache, $props, $setup, $data, $options) {\n  const _component_Breadcrumb = _resolveComponent(\"Breadcrumb\");\n\n  return _openBlock(), _createElementBlock(\"div\", null, [_createCommentVNode(\" Breadcrumb \"), _createVNode(_component_Breadcrumb, {\n    breadcrumb: \"PostContractorKeypickups\"\n  }), _createElementVNode(\"div\", _hoisted_1, [_hoisted_2, _createElementVNode(\"form\", _hoisted_3, [_createElementVNode(\"div\", _hoisted_4, [_createElementVNode(\"div\", _hoisted_5, [_hoisted_6, _withDirectives(_createElementVNode(\"input\", {\n    type: \"text\",\n    class: \"form-control\",\n    id: \"purpose\",\n    name: \"purpose\",\n    required: \"\",\n    \"onUpdate:modelValue\": _cache[0] || (_cache[0] = $event => $setup.purpose = $event)\n  }, null, 512\n  /* NEED_PATCH */\n  ), [[_vModelText, $setup.purpose]])]), _createElementVNode(\"div\", _hoisted_7, [_hoisted_8, _withDirectives(_createElementVNode(\"select\", {\n    class: \"form-control\",\n    id: \"status\",\n    name: \"status\",\n    required: \"\",\n    \"onUpdate:modelValue\": _cache[1] || (_cache[1] = $event => $setup.status = $event)\n  }, _hoisted_11, 512\n  /* NEED_PATCH */\n  ), [[_vModelSelect, $setup.status]])])]), _createElementVNode(\"div\", _hoisted_12, [_createElementVNode(\"div\", _hoisted_13, [_hoisted_14, _withDirectives(_createElementVNode(\"input\", {\n    type: \"text\",\n    class: \"form-control\",\n    id: \"keyinfo_id\",\n    name: \"keyinfo_id\",\n    required: \"\",\n    \"onUpdate:modelValue\": _cache[2] || (_cache[2] = $event => $setup.keyinfo_id = $event)\n  }, null, 512\n  /* NEED_PATCH */\n  ), [[_vModelText, $setup.keyinfo_id]])])]), _createElementVNode(\"div\", _hoisted_15, [_createElementVNode(\"div\", _hoisted_16, [_hoisted_17, _createElementVNode(\"video\", _hoisted_18, null, 512\n  /* NEED_PATCH */\n  )])]), _createElementVNode(\"div\", {\n    class: \"form-row\"\n  }, [_createElementVNode(\"div\", {\n    class: \"mt-6\"\n  }, [_createElementVNode(\"button\", {\n    type: \"button\",\n    class: \"btn btn-primary\",\n    onClick: $setup.startScanner\n  }, \"Start Scanner\"), _createElementVNode(\"button\", {\n    type: \"button\",\n    class: \"btn btn-danger\",\n    onClick: $setup.stopScanner\n  }, \"Stop Scanner\"), _createElementVNode(\"button\", {\n    type: \"button\",\n    class: \"btn btn-success\",\n    onClick: $setup.captureImage\n  }, \"Capture Image\")])]), _createElementVNode(\"div\", _hoisted_19, [_createElementVNode(\"div\", _hoisted_20, [_createCommentVNode(\" Image preview \"), _hoisted_21, _createCommentVNode(\" Include a hidden input field to store the captured image data URL \"), _withDirectives(_createElementVNode(\"input\", {\n    type: \"hidden\",\n    id: \"pickup_photo_path_upload\",\n    name: \"pickup_photo_path_upload\",\n    \"onUpdate:modelValue\": _cache[3] || (_cache[3] = $event => $setup.pickup_photo_path_upload = $event)\n  }, null, 512\n  /* NEED_PATCH */\n  ), [[_vModelText, $setup.pickup_photo_path_upload]]), _createCommentVNode(\" Download link for the captured image \"), _hoisted_22, _hoisted_23, _createCommentVNode(\" Include a hidden input field to store the captured image data URL \"), _hoisted_24]), _createElementVNode(\"div\", {\n    class: \"mt-4\"\n  }, [_createElementVNode(\"button\", {\n    type: \"button\",\n    class: \"btn btn-primary\",\n    onClick: $setup.submitForm\n  }, \"Submit\")])])])])]);\n}","map":{"version":3,"mappings":"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","names":["class","_createElementVNode","id","for","value","_hoisted_9","_hoisted_10","ref","autoplay","playsinline","src","alt","style","download","type","name","_createElementBlock","_createCommentVNode","_createVNode","_component_Breadcrumb","breadcrumb","_hoisted_2","_hoisted_6","required","$setup","$event","_hoisted_8","_hoisted_14","_hoisted_17","onClick","_hoisted_21","_hoisted_22","_hoisted_23","_hoisted_24"],"sourceRoot":"","sources":["C:\\xampp\\htdocs\\keyman-vue\\src\\views\\PostContractorKeypickup.vue"],"sourcesContent":["<template>\r\n    <div>\r\n      <!-- Breadcrumb -->\r\n      <Breadcrumb breadcrumb=\"PostContractorKeypickups\" />\r\n  \r\n      <div class=\"mt-8\">\r\n        <h4 class=\"text-gray-600\">POST Contractor Key Pickup</h4>\r\n        <form id=\"pickupForm\">\r\n          <div class=\"form-row\">\r\n            <div class=\"mt-4\">\r\n              <label for=\"purpose\">Purpose:</label>\r\n              <input type=\"text\" class=\"form-control\" id=\"purpose\" name=\"purpose\" required v-model=\"purpose\" />\r\n            </div>\r\n            <div class=\"mt-4\">\r\n              <label for=\"status\">Status:</label>\r\n              <select class=\"form-control\" id=\"status\" name=\"status\" required v-model=\"status\">\r\n                <option value=\"returned\">Returned</option>\r\n                <option value=\"unreturned\">Unreturned</option>\r\n              </select>\r\n            </div>\r\n          </div>\r\n          <div class=\"form-row\">\r\n            <div class=\"mt-4\">\r\n              <label for=\"keyinfo_id\">Keyinfo ID:</label>\r\n              <input type=\"text\" class=\"form-control\" id=\"keyinfo_id\" name=\"keyinfo_id\" required v-model=\"keyinfo_id\" />\r\n            </div>\r\n          </div>\r\n          <div class=\"form-row\">\r\n            <div class=\"mt-4\">\r\n              <label for=\"qrScanner\">QR Code Scanner:</label>\r\n              <video ref=\"video\" autoplay playsinline></video>\r\n            </div>\r\n          </div>\r\n          <div class=\"form-row\">\r\n            <div class=\"mt-6\">\r\n              <button type=\"button\" class=\"btn btn-primary\" @click=\"startScanner\">Start Scanner</button>\r\n              <button type=\"button\" class=\"btn btn-danger\" @click=\"stopScanner\">Stop Scanner</button>\r\n              <button type=\"button\" class=\"btn btn-success\" @click=\"captureImage\">Capture Image</button>\r\n            </div>\r\n          </div>\r\n          <div class=\"form-row\">\r\n            <div class=\"mt-6\">\r\n              <!-- Image preview -->\r\n              <img id=\"capturedImage\" src=\"\" alt=\"Captured Image\" style=\"max-width: 100%; max-width: 500px; display: none;\" />\r\n              <!-- Include a hidden input field to store the captured image data URL -->\r\n              <input type=\"hidden\" id=\"pickup_photo_path_upload\" name=\"pickup_photo_path_upload\" v-model=\"pickup_photo_path_upload\" />\r\n              <!-- Download link for the captured image -->\r\n              <a id=\"downloadImageLink\" class=\"btn btn-primary\" style=\"display: none;\" download=\"pickup_image.jpeg\">Download Image</a><br />\r\n              <!-- Include a hidden input field to store the captured image data URL -->\r\n              <input type=\"file\" id=\"pickup_photo_path\" name=\"pickup_photo_path\" />\r\n            </div>\r\n            <div class=\"mt-4\">\r\n              <button type=\"button\" class=\"btn btn-primary\" @click=\"submitForm\">Submit</button>\r\n            </div>\r\n          </div>\r\n        </form>\r\n      </div>\r\n    </div>\r\n  </template>\r\n  \r\n  <script setup>\r\nimport { ref } from 'vue';\r\nimport jsQR from 'jsqr'; // Import the jsQR library\r\n\r\nconst purpose = ref('');\r\nconst status = ref('returned');\r\nconst keyinfo_id = ref('');\r\nconst pickup_photo_path_upload = ref('');\r\nconst video = ref(null);\r\nlet scannerInterval;\r\nlet scanning = false;\r\n\r\nconst startScanner = () => {\r\n  scanning = true;\r\n  scannerInterval = setInterval(scanQRCode, 1000);\r\n};\r\n\r\nconst stopScanner = () => {\r\n  scanning = false;\r\n  clearInterval(scannerInterval);\r\n};\r\n\r\nconst captureImage = () => {\r\n  if (scanning) {\r\n    const canvas = document.createElement('canvas');\r\n    canvas.width = video.value.videoWidth;\r\n    canvas.height = video.value.videoHeight;\r\n    const context = canvas.getContext('2d');\r\n    context.drawImage(video.value, 0, 0, canvas.width, canvas.height);\r\n\r\n    canvas.toBlob(function (blob) {\r\n      if (blob) {\r\n        const imageUrl = URL.createObjectURL(blob);\r\n\r\n        const capturedImage = document.getElementById('capturedImage');\r\n        capturedImage.src = imageUrl;\r\n        capturedImage.style.display = 'block';\r\n\r\n        // Use .value to update the ref\r\n        pickup_photo_path_upload.value = imageUrl;\r\n\r\n        const downloadImageLink = document.getElementById('downloadImageLink');\r\n        downloadImageLink.href = imageUrl;\r\n        downloadImageLink.style.display = 'block';\r\n\r\n        const link = document.createElement('a');\r\n        link.href = imageUrl;\r\n        link.download = 'pickup_image.jpeg';\r\n        link.click();\r\n\r\n        const uploadInput = document.createElement('input');\r\n        uploadInput.type = 'file';\r\n        uploadInput.value = imageUrl;\r\n        uploadInput.name = 'pickup_photo_path_upload';\r\n        uploadInput.style.display = 'none';\r\n        // Append the uploadInput to the appropriate form element\r\n        document.getElementById('pickupForm').appendChild(uploadInput);\r\n      }\r\n    }, 'image/jpeg');\r\n  }\r\n};\r\n\r\nconst submitForm = () => {\r\n  const url = 'http://keyman-env.eba-dhwuuaiv.us-east-1.elasticbeanstalk.com/api/contractors/1/keypickups';\r\n  const headers = {\r\n    'Authorization': 'Bearer 17|jnWPdWo8JoCK9EJZc2fLp3rmYYRBUtyLIyt301s6',\r\n    'Accept': 'application/json',\r\n  };\r\n\r\n  const formData = new FormData(document.getElementById('pickupForm'));\r\n\r\n  fetch(url, {\r\n    method: 'POST',\r\n    headers,\r\n    body: formData,\r\n  })\r\n    .then((response) => response.json())\r\n    .then((data) => {\r\n      console.log(data);\r\n    })\r\n    .catch((error) => {\r\n      console.error(error);\r\n    });\r\n};\r\n\r\nconst scanQRCode = () => {\r\n  if (scanning) {\r\n    const canvas = document.createElement('canvas');\r\n    canvas.width = video.value.videoWidth;\r\n    canvas.height = video.value.videoHeight;\r\n    const context = canvas.getContext('2d');\r\n    context.drawImage(video.value, 0, 0, canvas.width, canvas.height);\r\n\r\n    const imageData = context.getImageData(0, 0, canvas.width, canvas.height);\r\n\r\n    // Make sure to import 'jsQR' library\r\n    const code = jsQR(imageData.data, imageData.width, imageData.height);\r\n\r\n    if (code) {\r\n      keyinfo_id.value = code.data;\r\n    }\r\n  }\r\n};\r\n</script>"]},"metadata":{},"sourceType":"module"}