{"ast":null,"code":"import { createCommentVNode as _createCommentVNode, createVNode as _createVNode, createElementVNode as _createElementVNode, vModelText as _vModelText, withDirectives as _withDirectives, vModelSelect as _vModelSelect, createTextVNode as _createTextVNode, openBlock as _openBlock, createElementBlock as _createElementBlock } from \"vue\";\nconst _hoisted_1 = {\n  class: \"mt-8\"\n};\n\nconst _hoisted_2 = /*#__PURE__*/_createElementVNode(\"h4\", {\n  class: \"text-gray-600\"\n}, \"POST Contractor Key Pickup\", -1\n/* HOISTED */\n);\n\nconst _hoisted_3 = {\n  id: \"pickupForm\"\n};\nconst _hoisted_4 = {\n  class: \"form-row\"\n};\nconst _hoisted_5 = {\n  class: \"mt-4\"\n};\n\nconst _hoisted_6 = /*#__PURE__*/_createElementVNode(\"label\", {\n  for: \"purpose\"\n}, \"Purpose: \", -1\n/* HOISTED */\n);\n\nconst _hoisted_7 = {\n  class: \"mt-4\"\n};\n\nconst _hoisted_8 = /*#__PURE__*/_createElementVNode(\"label\", {\n  for: \"status\"\n}, \"Status: \", -1\n/* HOISTED */\n);\n\nconst _hoisted_9 = /*#__PURE__*/_createElementVNode(\"option\", {\n  value: \"returned\"\n}, \"Returned\", -1\n/* HOISTED */\n);\n\nconst _hoisted_10 = /*#__PURE__*/_createElementVNode(\"option\", {\n  value: \"unreturned\"\n}, \"Unreturned\", -1\n/* HOISTED */\n);\n\nconst _hoisted_11 = [_hoisted_9, _hoisted_10];\nconst _hoisted_12 = {\n  class: \"form-row\"\n};\nconst _hoisted_13 = {\n  class: \"mt-4\"\n};\n\nconst _hoisted_14 = /*#__PURE__*/_createElementVNode(\"label\", {\n  for: \"keyinfo_id\"\n}, \"Keyinfo ID: \", -1\n/* HOISTED */\n);\n\nconst _hoisted_15 = {\n  class: \"form-row\"\n};\nconst _hoisted_16 = {\n  class: \"mt-4\"\n};\n\nconst _hoisted_17 = /*#__PURE__*/_createElementVNode(\"label\", {\n  for: \"qrScanner\"\n}, \"QR Code Scanner: \", -1\n/* HOISTED */\n);\n\nconst _hoisted_18 = {\n  ref: \"video\",\n  autoplay: \"\",\n  playsinline: \"\",\n  style: {\n    \"max-width\": \"350px\"\n  }\n};\n\nconst _hoisted_19 = /*#__PURE__*/_createTextVNode(\"   \");\n\nconst _hoisted_20 = /*#__PURE__*/_createTextVNode(\"   \");\n\nconst _hoisted_21 = /*#__PURE__*/_createTextVNode(\"   \");\n\nconst _hoisted_22 = {\n  class: \"form-row\"\n};\nconst _hoisted_23 = {\n  class: \"mt-6\"\n};\n\nconst _hoisted_24 = /*#__PURE__*/_createElementVNode(\"img\", {\n  id: \"capturedImage\",\n  src: \"\",\n  alt: \"Captured Image\",\n  style: {\n    \"max-width\": \"350px\",\n    \"display\": \"none\"\n  }\n}, null, -1\n/* HOISTED */\n);\n\nconst _hoisted_25 = /*#__PURE__*/_createElementVNode(\"a\", {\n  id: \"downloadImageLink\",\n  class: \"px-4 py-2 font-medium tracking-wide text-white capitalize transition-colors duration-200 transform bg-indigo-600 rounded-md hover:bg-indigo-500 focus:outline-none focus:bg-indigo-500\",\n  style: {\n    \"display\": \"none\"\n  },\n  download: \"pickup_image.jpeg\"\n}, \"Download Image\", -1\n/* HOISTED */\n);\n\nconst _hoisted_26 = /*#__PURE__*/_createElementVNode(\"br\", null, null, -1\n/* HOISTED */\n);\n\nconst _hoisted_27 = /*#__PURE__*/_createElementVNode(\"input\", {\n  type: \"file\",\n  class: \"px-2 py-2 font-medium tracking-wide text-white capitalize transition-colors duration-200 transform bg-indigo-600 rounded-md hover:bg-indigo-500 focus:outline-none focus:bg-indigo-500\",\n  id: \"pickup_photo_path\",\n  name: \"pickup_photo_path\"\n}, null, -1\n/* HOISTED */\n);\n\nexport function render(_ctx, _cache, $props, $setup, $data, $options) {\n  return _openBlock(), _createElementBlock(\"div\", null, [_createCommentVNode(\" Breadcrumb \"), _createVNode($setup[\"Breadcrumb\"], {\n    breadcrumb: \"PostContractorKeypickups\"\n  }), _createElementVNode(\"div\", _hoisted_1, [_hoisted_2, _createElementVNode(\"form\", _hoisted_3, [_createElementVNode(\"div\", _hoisted_4, [_createElementVNode(\"div\", _hoisted_5, [_hoisted_6, _withDirectives(_createElementVNode(\"input\", {\n    type: \"text\",\n    class: \"px-4 py-2 border rounded-md\",\n    id: \"purpose\",\n    name: \"purpose\",\n    required: \"\",\n    \"onUpdate:modelValue\": _cache[0] || (_cache[0] = $event => $setup.purpose = $event)\n  }, null, 512\n  /* NEED_PATCH */\n  ), [[_vModelText, $setup.purpose]])]), _createElementVNode(\"div\", _hoisted_7, [_hoisted_8, _withDirectives(_createElementVNode(\"select\", {\n    class: \"px-4 py-2 border rounded-md\",\n    id: \"status\",\n    name: \"status\",\n    required: \"\",\n    \"onUpdate:modelValue\": _cache[1] || (_cache[1] = $event => $setup.status = $event)\n  }, _hoisted_11, 512\n  /* NEED_PATCH */\n  ), [[_vModelSelect, $setup.status]])])]), _createElementVNode(\"div\", _hoisted_12, [_createElementVNode(\"div\", _hoisted_13, [_hoisted_14, _withDirectives(_createElementVNode(\"input\", {\n    type: \"text\",\n    class: \"px-4 py-2 border rounded-md\",\n    id: \"keyinfo_id\",\n    name: \"keyinfo_id\",\n    required: \"\",\n    \"onUpdate:modelValue\": _cache[2] || (_cache[2] = $event => $setup.keyinfo_id = $event)\n  }, null, 512\n  /* NEED_PATCH */\n  ), [[_vModelText, $setup.keyinfo_id]])])]), _createElementVNode(\"div\", _hoisted_15, [_createElementVNode(\"div\", _hoisted_16, [_hoisted_17, _createCommentVNode(\" Properly bind the video element \"), _createElementVNode(\"video\", _hoisted_18, null, 512\n  /* NEED_PATCH */\n  )])]), _createElementVNode(\"div\", {\n    class: \"form-row\"\n  }, [_createElementVNode(\"div\", {\n    class: \"mt-6\"\n  }, [_createElementVNode(\"button\", {\n    type: \"button\",\n    class: \"px-4 py-2 font-medium tracking-wide text-white capitalize transition-colors duration-200 transform bg-indigo-600 rounded-md hover:bg-indigo-500 focus:outline-none focus:bg-indigo-500\",\n    onClick: $setup.startScanner\n  }, \"Start Scanner\"), _hoisted_19, _createElementVNode(\"button\", {\n    type: \"button\",\n    class: \"px-4 py-2 font-medium tracking-wide text-white capitalize transition-colors duration-200 transform bg-indigo-600 rounded-md hover:bg-indigo-500 focus:outline-none focus:bg-indigo-500\",\n    onClick: $setup.stopScanner\n  }, \"Stop Scanner\"), _hoisted_20, _createElementVNode(\"button\", {\n    type: \"button\",\n    class: \"px-4 py-2 font-medium tracking-wide text-white capitalize transition-colors duration-200 transform bg-indigo-600 rounded-md hover:bg-indigo-500 focus:outline-none focus:bg-indigo-500\",\n    onClick: $setup.captureImage\n  }, \"Capture Image\"), _hoisted_21])]), _createElementVNode(\"div\", _hoisted_22, [_createElementVNode(\"div\", _hoisted_23, [_createCommentVNode(\" Image preview \"), _hoisted_24, _createCommentVNode(\" Include a hidden input field to store the captured image data URL \"), _withDirectives(_createElementVNode(\"input\", {\n    type: \"hidden\",\n    id: \"pickup_photo_path_upload\",\n    name: \"pickup_photo_path_upload\",\n    \"onUpdate:modelValue\": _cache[3] || (_cache[3] = $event => $setup.pickup_photo_path_upload = $event)\n  }, null, 512\n  /* NEED_PATCH */\n  ), [[_vModelText, $setup.pickup_photo_path_upload]]), _createCommentVNode(\" Download link for the captured image \"), _hoisted_25, _hoisted_26, _createCommentVNode(\" Include a hidden input field to store the captured image data URL \"), _hoisted_27]), _createElementVNode(\"div\", {\n    class: \"mt-4\"\n  }, [_createElementVNode(\"button\", {\n    type: \"button\",\n    class: \"px-4 py-2 font-medium tracking-wide text-white capitalize transition-colors duration-200 transform bg-indigo-600 rounded-md hover:bg-indigo-500 focus:outline-none focus:bg-indigo-500\",\n    onClick: $setup.submitForm\n  }, \"Submit\")])])])])]);\n}","map":{"version":3,"mappings":"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","names":["class","_createElementVNode","id","for","value","_hoisted_9","_hoisted_10","ref","autoplay","playsinline","style","src","alt","download","type","name","_createElementBlock","_createCommentVNode","_createVNode","$setup","breadcrumb","_hoisted_2","_hoisted_6","required","$event","_hoisted_8","_hoisted_14","_hoisted_17","onClick","_hoisted_24","_hoisted_25","_hoisted_26","_hoisted_27"],"sourceRoot":"","sources":["C:\\xampp\\htdocs\\keyman-vue\\keyman-vue\\src\\views\\PostContractorKeypickup.vue"],"sourcesContent":["<template>\r\n    <div>\r\n      <!-- Breadcrumb -->\r\n      <Breadcrumb breadcrumb=\"PostContractorKeypickups\" />\r\n  \r\n      <div class=\"mt-8\">\r\n        <h4 class=\"text-gray-600\">POST Contractor Key Pickup</h4>\r\n        <form id=\"pickupForm\">\r\n          <div class=\"form-row\">\r\n            <div class=\"mt-4\">\r\n              <label for=\"purpose\">Purpose: </label>\r\n              <input type=\"text\" class=\"px-4 py-2 border rounded-md\" id=\"purpose\" name=\"purpose\" required v-model=\"purpose\" />\r\n            </div>\r\n            <div class=\"mt-4\">\r\n              <label for=\"status\">Status: </label>\r\n              <select class=\"px-4 py-2 border rounded-md\" id=\"status\" name=\"status\" required v-model=\"status\">\r\n                <option value=\"returned\">Returned</option>\r\n                <option value=\"unreturned\">Unreturned</option>\r\n              </select>\r\n            </div>\r\n          </div>\r\n          <div class=\"form-row\">\r\n            <div class=\"mt-4\">\r\n              <label for=\"keyinfo_id\">Keyinfo ID: </label>\r\n              <input type=\"text\" class=\"px-4 py-2 border rounded-md\" id=\"keyinfo_id\" name=\"keyinfo_id\" required v-model=\"keyinfo_id\" />\r\n            </div>\r\n          </div>\r\n          <div class=\"form-row\">\r\n            <div class=\"mt-4\">\r\n              <label for=\"qrScanner\">QR Code Scanner: </label>\r\n              <!-- Properly bind the video element -->\r\n              <video ref=\"video\" autoplay playsinline style=\"max-width: 350px;\"></video>\r\n            </div>\r\n          </div>\r\n          <div class=\"form-row\">\r\n            <div class=\"mt-6\">\r\n              <button type=\"button\" class=\"px-4 py-2 font-medium tracking-wide text-white capitalize transition-colors duration-200 transform bg-indigo-600 rounded-md hover:bg-indigo-500 focus:outline-none focus:bg-indigo-500\" @click=\"startScanner\">Start Scanner</button> &nbsp;\r\n              <button type=\"button\" class=\"px-4 py-2 font-medium tracking-wide text-white capitalize transition-colors duration-200 transform bg-indigo-600 rounded-md hover:bg-indigo-500 focus:outline-none focus:bg-indigo-500\" @click=\"stopScanner\">Stop Scanner</button> &nbsp;\r\n              <button type=\"button\" class=\"px-4 py-2 font-medium tracking-wide text-white capitalize transition-colors duration-200 transform bg-indigo-600 rounded-md hover:bg-indigo-500 focus:outline-none focus:bg-indigo-500\" @click=\"captureImage\">Capture Image</button> &nbsp;\r\n            </div>\r\n          </div>\r\n          <div class=\"form-row\">\r\n            <div class=\"mt-6\">\r\n              <!-- Image preview -->\r\n              <img id=\"capturedImage\" src=\"\" alt=\"Captured Image\" style=\"max-width: 100%; max-width: 350px; display: none;\" />\r\n              <!-- Include a hidden input field to store the captured image data URL -->\r\n              <input type=\"hidden\" id=\"pickup_photo_path_upload\" name=\"pickup_photo_path_upload\" v-model=\"pickup_photo_path_upload\" />\r\n              <!-- Download link for the captured image -->\r\n              <a id=\"downloadImageLink\" class=\"px-4 py-2 font-medium tracking-wide text-white capitalize transition-colors duration-200 transform bg-indigo-600 rounded-md hover:bg-indigo-500 focus:outline-none focus:bg-indigo-500\" style=\"display: none;\" download=\"pickup_image.jpeg\">Download Image</a><br />\r\n              <!-- Include a hidden input field to store the captured image data URL -->\r\n              <input type=\"file\" class=\"px-2 py-2 font-medium tracking-wide text-white capitalize transition-colors duration-200 transform bg-indigo-600 rounded-md hover:bg-indigo-500 focus:outline-none focus:bg-indigo-500\" id=\"pickup_photo_path\" name=\"pickup_photo_path\" />\r\n            </div>\r\n            <div class=\"mt-4\">\r\n              <button type=\"button\" class=\"px-4 py-2 font-medium tracking-wide text-white capitalize transition-colors duration-200 transform bg-indigo-600 rounded-md hover:bg-indigo-500 focus:outline-none focus:bg-indigo-500\" @click=\"submitForm\">Submit</button>\r\n            </div>\r\n          </div>\r\n        </form>\r\n      </div>\r\n    </div>\r\n  </template>\r\n  \r\n  <script setup>\r\n  import { ref } from 'vue';\r\n  import Breadcrumb from '../partials/Breadcrumb.vue'\r\n  import {onMounted, onBeforeUnmount } from 'vue';\r\n  import jsQR from 'jsqr';\r\n  \r\n  const purpose = ref('');\r\n  const status = ref('returned');\r\n  const keyinfo_id = ref('');\r\n  const pickup_photo_path_upload = ref('');\r\n  const video = ref(null);\r\n  let scannerInterval;\r\n  let scanning = false;\r\n  \r\n  // Function to set up video stream\r\n  const setupVideo = async () => {\r\n    try {\r\n      const stream = await navigator.mediaDevices.getUserMedia({ video: true });\r\n      video.value.srcObject = stream;\r\n    } catch (error) {\r\n      console.error('Error accessing camera:', error);\r\n    }\r\n  };\r\n  \r\n  // Lifecycle hook to start the video stream when the component is mounted\r\n  onMounted(() => {\r\n    setupVideo();\r\n  });\r\n  \r\n  // Lifecycle hook to clean up when the component is unmounted\r\n  onBeforeUnmount(() => {\r\n    if (video.value.srcObject) {\r\n      const tracks = video.value.srcObject.getTracks();\r\n      tracks.forEach((track) => track.stop());\r\n    }\r\n  });\r\n  \r\n  const startScanner = () => {\r\n    scanning = true;\r\n    scannerInterval = setInterval(scanQRCode, 1000);\r\n  };\r\n  \r\n  const stopScanner = () => {\r\n    scanning = false;\r\n    clearInterval(scannerInterval);\r\n  };\r\n  \r\n  const captureImage = () => {\r\n    if (scanning) {\r\n      const canvas = document.createElement('canvas');\r\n      canvas.width = video.value.videoWidth;\r\n      canvas.height = video.value.videoHeight;\r\n      const context = canvas.getContext('2d');\r\n      context.drawImage(video.value, 0, 0, canvas.width, canvas.height);\r\n  \r\n      canvas.toBlob(function (blob) {\r\n        if (blob) {\r\n          const imageUrl = URL.createObjectURL(blob);\r\n  \r\n          const capturedImage = document.getElementById('capturedImage');\r\n          capturedImage.src = imageUrl;\r\n          capturedImage.style.display = 'block';\r\n  \r\n          // Use .value to update the ref\r\n          pickup_photo_path_upload.value = imageUrl;\r\n  \r\n          const downloadImageLink = document.getElementById('downloadImageLink');\r\n          downloadImageLink.href = imageUrl;\r\n          downloadImageLink.style.display = 'block';\r\n  \r\n          const link = document.createElement('a');\r\n          link.href = imageUrl;\r\n          link.download = 'pickup_image.jpeg';\r\n          link.click();\r\n  \r\n          const uploadInput = document.createElement('input');\r\n          uploadInput.type = 'file';\r\n          uploadInput.value = imageUrl;\r\n          uploadInput.name = 'pickup_photo_path_upload';\r\n          uploadInput.style.display = 'none';\r\n          // Append the uploadInput to the appropriate form element\r\n          document.getElementById('pickupForm').appendChild(uploadInput);\r\n        }\r\n      }, 'image/jpeg');\r\n    }\r\n  };\r\n  \r\n  const submitForm = () => {\r\n    const url = 'https://www.prototypeapp.online/api/contractors/2/keypickups';\r\n    const headers = {\r\n      'Authorization': 'Bearer 17|jnWPdWo8JoCK9EJZc2fLp3rmYYRBUtyLIyt301s6',\r\n      'Accept': 'application/json',\r\n    };\r\n  \r\n    const formData = new FormData(document.getElementById('pickupForm'));\r\n  \r\n    fetch(url, {\r\n      method: 'POST',\r\n      headers,\r\n      body: formData,\r\n    })\r\n      .then((response) => response.json())\r\n      .then((data) => {\r\n        console.log(data);\r\n      })\r\n      .catch((error) => {\r\n        console.error(error);\r\n      });\r\n  };\r\n  \r\n  const scanQRCode = () => {\r\n    if (scanning) {\r\n      const canvas = document.createElement('canvas');\r\n      canvas.width = video.value.videoWidth;\r\n      canvas.height = video.value.videoHeight;\r\n      const context = canvas.getContext('2d');\r\n      context.drawImage(video.value, 0, 0, canvas.width, canvas.height);\r\n  \r\n      const imageData = context.getImageData(0, 0, canvas.width, canvas.height);\r\n  \r\n      // Make sure to import 'jsQR' library\r\n      const code = jsQR(imageData.data, imageData.width, imageData.height);\r\n  \r\n      if (code) {\r\n        keyinfo_id.value = code.data;\r\n      }\r\n    }\r\n  };\r\n  </script>\r\n  "]},"metadata":{},"sourceType":"module"}